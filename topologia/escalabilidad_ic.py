import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from scipy.stats import norm

# Datos proporcionados
datos_2_dispositivos = [1.3119168281555176, 0.890838623046875, 0.9329512119293213, 0.7720170021057129, 0.9382290840148926, 0.9332520961761475, 0.6825032234191895, 0.9647114276885986, 0.8528454303741455, 0.8827927112579346, 0.9504141807556152, 0.9571425914764404, 1.1055901050567627, 1.3471441268920898, 1.007885217666626, 0.9544820785522461, 0.9600718021392822, 0.7165687084197998, 1.0338554382324219, 0.9305968284606934, 0.8821136951446533, 0.8102624416351318, 0.7954237461090088, 0.8924174308776855, 0.8653538227081299, 0.8312509059906006, 1.2095451354980469, 0.8794262409210205, 0.8653609752655029, 0.8464713096618652, 0.8771796226501465, 0.8308088779449463, 0.9130475521087646, 0.853344202041626, 0.8303346633911133, 0.69203782081604, 0.7913331985473633, 0.901630163192749, 0.7783856391906738, 0.8966407775878906, 0.8716845512390137, 0.7001409530639648, 0.8332033157348633, 0.8620014190673828, 0.7704527378082275, 0.7999203205108643, 0.9748880863189697, 0.8156595230102539, 0.7169036865234375, 0.7533032894134521]
datos_3_dispositivos = [1.842174768447876, 1.218639612197876, 1.4591290950775146, 1.3793396949768066, 1.4844708442687988, 1.313967227935791, 1.4103477001190186, 1.1356346607208252, 1.276533842086792, 1.4440150260925293, 1.1556522846221924, 1.617767333984375, 1.2784593105316162, 1.7981860637664795, 1.267030954360962, 1.41562819480896, 1.3993101119995117, 1.7481238842010498, 1.2433011531829834, 1.6221063137054443, 1.161125898361206, 1.4806005954742432, 1.2677507400512695, 1.2650785446166992, 1.328916072845459, 1.2834181785583496, 1.3003056049346924, 1.3572437763214111, 1.2672600746154785, 1.285029649734497, 1.1912000179290771, 1.2123870849609375, 1.2692971229553223, 1.221468448638916, 1.2270865440368652, 1.2859864234924316, 1.3094356060028076, 1.4809105396270752, 1.2557437419891357, 1.1663224697113037, 1.3406729698181152, 1.454312801361084, 1.2770509719848633, 1.2742700576782227, 1.3092825412750244, 1.139589548110962, 1.173128604888916, 1.42449951171875, 1.4398691654205322, 1.2092976570129395]
datos_4_dispositivos = [2.542013645172119, 2.1861977577209473, 1.9642772674560547, 1.7266030311584473, 1.7635557651519775, 1.7117276191711426, 1.7455945014953613, 1.6476387977600098, 1.991431713104248, 1.7358393669128418, 1.6200501918792725, 2.044651985168457, 2.0008957386016846, 1.8376789093017578, 1.6666343212127686, 2.0125913619995117, 1.9634730815887451, 1.9826433658599854, 1.9449784755706787, 1.5824899673461914, 1.8072922229766846, 2.0008301734924316, 1.8038053512573242, 1.7982752323150635, 2.0091490745544434, 1.9457640647888184, 1.8163769245147705, 1.7788941860198975, 1.9211430549621582, 1.959561824798584, 1.732682704925537, 1.7108476161956787, 1.6884193420410156, 1.8345153331756592, 1.5814063549041748, 1.819563388824463, 1.729494333267212, 1.6955385208129883, 1.7675433158874512, 1.6890182495117188, 1.8090877532958984, 1.8188819885253906, 1.82033109664917, 1.6889824867248535, 2.0187981128692627, 1.6704885959625244, 1.7177276611328125, 1.745093822479248, 1.7791433334350586, 1.946101427078247]
datos_5_dispositivos = [2.976978063583374, 2.293135404586792, 2.0777852535247803, 2.650240659713745, 2.353100061416626, 2.2960758209228516, 2.2436585426330566, 2.3705248832702637, 2.107868194580078, 2.220432996749878, 2.2750024795532227, 2.091240406036377, 2.0986690521240234, 2.14974045753479, 2.151315450668335, 2.1338798999786377, 2.0940539836883545, 2.1665823459625244, 2.1187102794647217, 2.1475470066070557, 2.196540117263794, 2.2407734394073486, 2.1313416957855225, 2.2424237728118896, 2.2473251819610596, 2.3971614837646484, 2.143927574157715, 2.2534475326538086, 2.168574810028076, 2.324575662612915, 2.3642072677612305, 2.4600167274475098, 2.411309242248535, 2.362086772918701, 2.599332809448242, 2.2854645252227783, 2.562892436981201, 2.437718391418457, 2.202019214630127, 2.439473867416382, 2.180076837539673, 2.1673591136932373, 2.6091184616088867, 2.3262441158294678, 2.5301997661590576, 2.1403045654296875, 2.068560838699341, 2.2979307174682617, 2.403026819229126, 2.253980875015259]
datos_6_dispositivos = [3.70230481452942, 3.2563605308532715, 3.6716842651367188, 3.5940420627593994, 3.0133352279663086, 3.472463607788086, 3.328880548477173, 3.303987979888916, 3.434898853302002, 3.36922550201416, 3.1048035621643066, 3.120312213897705, 3.2422749996185303, 3.1441104412078857, 3.3965582847595215, 3.075040102005005, 3.261782169342041, 3.3730709552764893, 2.941072463989258, 3.4316868782043457, 3.388561964035034, 3.443246364593506, 3.6839675903320312, 3.1243221759796143, 3.0150372982025146, 3.1956307888031006, 3.0765933990478516, 3.2530272006988525, 3.187873601913452, 3.0625970363616943, 2.962873935699463, 2.8225600719451904, 3.160993814468384, 3.485067129135132, 3.3646674156188965, 3.4055886268615723, 3.0036275386810303, 3.536747694015503, 3.3915112018585205, 4.273683309555054, 3.4446325302124023, 3.4050400257110596, 3.403409957885742, 3.4598565101623535, 3.2019824981689453, 3.191850185394287, 3.138716697692871, 3.639110803604126, 3.1103460788726807, 3.0233471393585205]

# Función para calcular el intervalo de confianza
def intervalo_confianza(data, confianza=0.95):
    n = len(data)
    media = np.mean(data)
    stderr = np.std(data, ddof=1) / np.sqrt(n)
    h = stderr * norm.ppf((1 + confianza) / 2)
    return media, media - h, media + h

# Crear las gráficas
dispositivos = ['2', '3', '4', '5', '6']
datos = [datos_2_dispositivos, datos_3_dispositivos, datos_4_dispositivos, datos_5_dispositivos, datos_6_dispositivos]

medias = []
conf_intervals = []

for data in datos:
    media, lower, upper = intervalo_confianza(data)
    medias.append(media)
    conf_intervals.append((lower, upper))

# Crear la gráfica con intervalos de confianza
x = np.arange(len(dispositivos))

plt.figure(figsize=(10, 6))

# Color de la línea azul marino y color de los intervalos de confianza lacre
plt.errorbar(x, medias, yerr=[(top - bot) / 2 for bot, top in conf_intervals],
             fmt='o-', color='navy',  # Azul marino para la línea
             ecolor='brown',  # Lacre para los intervalos de confianza
             capsize=5, capthick=2, elinewidth=2, markersize=8)

plt.xticks(x, dispositivos)
plt.xlabel('Número de Dispositivos')
plt.ylabel('Tiempo (s)')
plt.title('Intervalos de Confianza del 95% para Tiempos por Número de Dispositivos')
plt.grid(True)
plt.show()